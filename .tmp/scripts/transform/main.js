'use strict';

$(document).ready(function () {
  $('form[name=form-2d]').change(function () {
    setValue2D();
  });
  $('form[name=form-3d]').change(function () {
    setValue3D();
  });

  $('select[name=select-mode]').change(function () {
    if ($(this).val() === 1) {
      init2D();
    } else {
      init3D();
    }
    // $(this).val() == 1 ? init2D() : init3D();
  });

  init2D();
});

/** @type {Object} Global Object */
var Global = {
  units: {
    translateX: 'px',
    translateY: 'px',
    translateZ: 'px',
    rotate: 'deg',
    rotateX: 'deg',
    rotateY: 'deg',
    rotateZ: 'deg',
    scale: '',
    scale3d: '',
    skewX: 'deg',
    skewY: 'deg'
  }
};

/**
 * 初始化2D设置
 */
function init2D() {
  changeMode('2d');
  setValue2D();
}

/**
 * 初始化3D设置
 */
function init3D() {
  changeMode('3d');
  setValue3D();
}

/**
 * 2D 3D模式更改
 * @param  {String} mode 当前模式
 */
function changeMode(mode) {
  if (mode === '3d') {
    $('.showpart').find('#box-2d').hide().next('#box-3d').show();

    $('.controlpanel').find('#control-2d').hide().end().find('#control-3d').show();
  } else {
    $('.showpart').find('#box-2d').show().next('#box-3d').hide();

    $('.controlpanel').find('#control-2d').show().end().find('#control-3d').hide();
  }

  // save mode
  $('select[name=select-mode]').data('val', mode);
}

/**
 * 图像状态更改
 */
function setValue2D() {
  // var mode = $('select[name=select-mode]').data('val');
  var $target = $('#box-2d');
  var $form = $('form[name=form-2d]');
  var state = '';
  var evalu;
  var ename;
  var eunit;

  $form.find('input').each(function () {
    evalu = $(this).val();
    ename = $(this).attr('name');
    eunit = Global.units[ename];

    if (ename === 'scale') {
      evalu /= 2;
    }

    // save
    $(this).data('val', evalu);
    $(this).data('unit', eunit);
    // show
    $(this).parents('li').find('.show').text(evalu + eunit);

    state += ename + '(' + evalu + eunit + ') ';
  });

  $target.css({
    transform: state
  });
}

/**
 * 设置3D值
 */
function setValue3D() {
  var $target = $('#box-3d');
  var $form = $('form[name=form-3d]');
  var evalu;
  var ename;

  $form.find('input, select').each(function () {
    evalu = $(this).val();
    ename = $(this).attr('name');

    // save
    $(this).data('val', evalu);

    switch (ename) {
      case 'perspective':
        evalu += 'px';
        $target.css(ename, evalu);
        break;

      case 'perspective-origin-x':
      case 'perspective-origin-y':
        var pox = $('input[name=perspective-origin-x]').data('val');
        var poy = $('input[name=perspective-origin-y]').data('val');
        var poxv = pox ? pox : 150;
        var poyv = pox ? poy : 150;

        evalu = poxv + '% ' + poyv + '%';
        $target.css('perspective-origin', evalu);
        break;

      case 'transform-style':
        evalu = evalu === 1 ? 'preserve-3d' : 'flat';
        $target.find('.cube').css(ename, evalu);
        break;

      case 'transform-origin-x':
      case 'transform-origin-y':
        var tox = $('input[name=transform-origin-x]').data('val');
        var toy = $('input[name=transform-origin-y]').data('val');
        var toxv = tox ? tox : 50;
        var toyv = toy ? toy : 50;

        evalu = toxv + '% ' + toyv + '%';
        $target.find('.cube div').css('transform-origin', evalu);
        break;

      case 'backface-visibility':
        evalu = evalu === 1 ? 'visible' : 'hidden';
        $target.find('.cube div').css(ename, evalu);
        break;

      default:
        break;
    }

    // show
    $(this).parents('li').find('.show').text(evalu);
  });
}
//# sourceMappingURL=data:application/json;base64,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QztBQUN4QyxjQUFNOztBQUFBLEFBRVIsV0FBSyxvQkFBb0IsQ0FBQztBQUMxQixXQUFLLG9CQUFvQjtBQUN2QixZQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsZ0NBQWdDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDMUQsWUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLGdDQUFnQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQzFELFlBQUksSUFBSSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsRUFBRSxDQUFDO0FBQzFCLFlBQUksSUFBSSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsRUFBRSxDQUFDOztBQUUxQixhQUFLLEdBQUcsSUFBSSxHQUFHLElBQUksR0FBRyxJQUFJLEdBQUcsR0FBRyxDQUFDO0FBQ2pDLGVBQU8sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxDQUFDLGtCQUFrQixFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ3pELGNBQU07O0FBQUEsQUFFUixXQUFLLHFCQUFxQjtBQUN4QixhQUFLLEdBQUcsS0FBSyxLQUFLLENBQUMsR0FBRyxTQUFTLEdBQUcsUUFBUSxDQUFDO0FBQzNDLGVBQU8sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQztBQUM1QyxjQUFNOztBQUFBLEFBRVI7QUFBUyxjQUFNO0FBQUE7OztBQUNoQixBQUdELEtBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztHQUNqRCxDQUFDLENBQUM7Q0FDSiIsImZpbGUiOiJ0cmFuc2Zvcm0vbWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAkKCdmb3JtW25hbWU9Zm9ybS0yZF0nKS5jaGFuZ2UoZnVuY3Rpb24oKSB7XG4gICAgc2V0VmFsdWUyRCgpO1xuICB9KTtcbiAgJCgnZm9ybVtuYW1lPWZvcm0tM2RdJykuY2hhbmdlKGZ1bmN0aW9uKCkge1xuICAgIHNldFZhbHVlM0QoKTtcbiAgfSk7XG5cbiAgJCgnc2VsZWN0W25hbWU9c2VsZWN0LW1vZGVdJykuY2hhbmdlKGZ1bmN0aW9uKCkge1xuICAgIGlmICgkKHRoaXMpLnZhbCgpID09PSAxKSB7XG4gICAgICBpbml0MkQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5pdDNEKCk7XG4gICAgfVxuICAgIC8vICQodGhpcykudmFsKCkgPT0gMSA/IGluaXQyRCgpIDogaW5pdDNEKCk7XG4gIH0pO1xuXG4gIGluaXQyRCgpO1xufSk7XG5cbi8qKiBAdHlwZSB7T2JqZWN0fSBHbG9iYWwgT2JqZWN0ICovXG52YXIgR2xvYmFsID0ge1xuICB1bml0czoge1xuICAgIHRyYW5zbGF0ZVg6ICdweCcsXG4gICAgdHJhbnNsYXRlWTogJ3B4JyxcbiAgICB0cmFuc2xhdGVaOiAncHgnLFxuICAgIHJvdGF0ZTogJ2RlZycsXG4gICAgcm90YXRlWDogJ2RlZycsXG4gICAgcm90YXRlWTogJ2RlZycsXG4gICAgcm90YXRlWjogJ2RlZycsXG4gICAgc2NhbGU6ICcnLFxuICAgIHNjYWxlM2Q6ICcnLFxuICAgIHNrZXdYOiAnZGVnJyxcbiAgICBza2V3WTogJ2RlZydcbiAgfVxufTtcblxuLyoqXG4gKiDliJ3lp4vljJYyROiuvue9rlxuICovXG5mdW5jdGlvbiBpbml0MkQoKSB7XG4gIGNoYW5nZU1vZGUoJzJkJyk7XG4gIHNldFZhbHVlMkQoKTtcbn1cblxuLyoqXG4gKiDliJ3lp4vljJYzROiuvue9rlxuICovXG5mdW5jdGlvbiBpbml0M0QoKSB7XG4gIGNoYW5nZU1vZGUoJzNkJyk7XG4gIHNldFZhbHVlM0QoKTtcbn1cblxuLyoqXG4gKiAyRCAzROaooeW8j+abtOaUuVxuICogQHBhcmFtICB7U3RyaW5nfSBtb2RlIOW9k+WJjeaooeW8j1xuICovXG5mdW5jdGlvbiBjaGFuZ2VNb2RlKG1vZGUpIHtcbiAgaWYgKG1vZGUgPT09ICczZCcpIHtcbiAgICAkKCcuc2hvd3BhcnQnKS5maW5kKCcjYm94LTJkJykuaGlkZSgpLm5leHQoJyNib3gtM2QnKS5zaG93KCk7XG5cbiAgICAkKCcuY29udHJvbHBhbmVsJykuZmluZCgnI2NvbnRyb2wtMmQnKS5oaWRlKCkuZW5kKClcbiAgICAgIC5maW5kKCcjY29udHJvbC0zZCcpLnNob3coKTtcbiAgfSBlbHNlIHtcbiAgICAkKCcuc2hvd3BhcnQnKS5maW5kKCcjYm94LTJkJykuc2hvdygpLm5leHQoJyNib3gtM2QnKS5oaWRlKCk7XG5cbiAgICAkKCcuY29udHJvbHBhbmVsJykuZmluZCgnI2NvbnRyb2wtMmQnKS5zaG93KCkuZW5kKClcbiAgICAgIC5maW5kKCcjY29udHJvbC0zZCcpLmhpZGUoKTtcbiAgfVxuXG4gIC8vIHNhdmUgbW9kZVxuICAkKCdzZWxlY3RbbmFtZT1zZWxlY3QtbW9kZV0nKS5kYXRhKCd2YWwnLCBtb2RlKTtcbn1cblxuLyoqXG4gKiDlm77lg4/nirbmgIHmm7TmlLlcbiAqL1xuZnVuY3Rpb24gc2V0VmFsdWUyRCgpIHtcbiAgLy8gdmFyIG1vZGUgPSAkKCdzZWxlY3RbbmFtZT1zZWxlY3QtbW9kZV0nKS5kYXRhKCd2YWwnKTtcbiAgdmFyICR0YXJnZXQgPSAkKCcjYm94LTJkJyk7XG4gIHZhciAkZm9ybSA9ICQoJ2Zvcm1bbmFtZT1mb3JtLTJkXScpO1xuICB2YXIgc3RhdGUgPSAnJztcbiAgdmFyIGV2YWx1O1xuICB2YXIgZW5hbWU7XG4gIHZhciBldW5pdDtcblxuICAkZm9ybS5maW5kKCdpbnB1dCcpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgZXZhbHUgPSAkKHRoaXMpLnZhbCgpO1xuICAgIGVuYW1lID0gJCh0aGlzKS5hdHRyKCduYW1lJyk7XG4gICAgZXVuaXQgPSBHbG9iYWwudW5pdHNbZW5hbWVdO1xuXG4gICAgaWYgKGVuYW1lID09PSAnc2NhbGUnKSB7XG4gICAgICBldmFsdSAvPSAyO1xuICAgIH1cblxuICAgIC8vIHNhdmVcbiAgICAkKHRoaXMpLmRhdGEoJ3ZhbCcsIGV2YWx1KTtcbiAgICAkKHRoaXMpLmRhdGEoJ3VuaXQnLCBldW5pdCk7XG4gICAgLy8gc2hvd1xuICAgICQodGhpcykucGFyZW50cygnbGknKS5maW5kKCcuc2hvdycpLnRleHQoZXZhbHUgKyBldW5pdCk7XG5cbiAgICBzdGF0ZSArPSBlbmFtZSArICcoJyArIGV2YWx1ICsgZXVuaXQgKyAnKSAnO1xuICB9KTtcblxuICAkdGFyZ2V0LmNzcyh7XG4gICAgdHJhbnNmb3JtOiBzdGF0ZVxuICB9KTtcbn1cblxuLyoqXG4gKiDorr7nva4zROWAvFxuICovXG5mdW5jdGlvbiBzZXRWYWx1ZTNEKCkge1xuICB2YXIgJHRhcmdldCA9ICQoJyNib3gtM2QnKTtcbiAgdmFyICRmb3JtID0gJCgnZm9ybVtuYW1lPWZvcm0tM2RdJyk7XG4gIHZhciBldmFsdTtcbiAgdmFyIGVuYW1lO1xuXG4gICRmb3JtLmZpbmQoJ2lucHV0LCBzZWxlY3QnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgIGV2YWx1ID0gJCh0aGlzKS52YWwoKTtcbiAgICBlbmFtZSA9ICQodGhpcykuYXR0cignbmFtZScpO1xuXG4gICAgLy8gc2F2ZVxuICAgICQodGhpcykuZGF0YSgndmFsJywgZXZhbHUpO1xuXG4gICAgc3dpdGNoIChlbmFtZSkge1xuICAgICAgY2FzZSAncGVyc3BlY3RpdmUnOlxuICAgICAgICBldmFsdSArPSAncHgnO1xuICAgICAgICAkdGFyZ2V0LmNzcyhlbmFtZSwgZXZhbHUpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAncGVyc3BlY3RpdmUtb3JpZ2luLXgnOlxuICAgICAgY2FzZSAncGVyc3BlY3RpdmUtb3JpZ2luLXknOlxuICAgICAgICB2YXIgcG94ID0gJCgnaW5wdXRbbmFtZT1wZXJzcGVjdGl2ZS1vcmlnaW4teF0nKS5kYXRhKCd2YWwnKTtcbiAgICAgICAgdmFyIHBveSA9ICQoJ2lucHV0W25hbWU9cGVyc3BlY3RpdmUtb3JpZ2luLXldJykuZGF0YSgndmFsJyk7XG4gICAgICAgIHZhciBwb3h2ID0gcG94ID8gcG94IDogMTUwO1xuICAgICAgICB2YXIgcG95diA9IHBveCA/IHBveSA6IDE1MDtcblxuICAgICAgICBldmFsdSA9IHBveHYgKyAnJSAnICsgcG95diArICclJztcbiAgICAgICAgJHRhcmdldC5jc3MoJ3BlcnNwZWN0aXZlLW9yaWdpbicsIGV2YWx1KTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ3RyYW5zZm9ybS1zdHlsZSc6XG4gICAgICAgIGV2YWx1ID0gZXZhbHUgPT09IDEgPyAncHJlc2VydmUtM2QnIDogJ2ZsYXQnO1xuICAgICAgICAkdGFyZ2V0LmZpbmQoJy5jdWJlJykuY3NzKGVuYW1lLCBldmFsdSk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICd0cmFuc2Zvcm0tb3JpZ2luLXgnOlxuICAgICAgY2FzZSAndHJhbnNmb3JtLW9yaWdpbi15JzpcbiAgICAgICAgdmFyIHRveCA9ICQoJ2lucHV0W25hbWU9dHJhbnNmb3JtLW9yaWdpbi14XScpLmRhdGEoJ3ZhbCcpO1xuICAgICAgICB2YXIgdG95ID0gJCgnaW5wdXRbbmFtZT10cmFuc2Zvcm0tb3JpZ2luLXldJykuZGF0YSgndmFsJyk7XG4gICAgICAgIHZhciB0b3h2ID0gdG94ID8gdG94IDogNTA7XG4gICAgICAgIHZhciB0b3l2ID0gdG95ID8gdG95IDogNTA7XG5cbiAgICAgICAgZXZhbHUgPSB0b3h2ICsgJyUgJyArIHRveXYgKyAnJSc7XG4gICAgICAgICR0YXJnZXQuZmluZCgnLmN1YmUgZGl2JykuY3NzKCd0cmFuc2Zvcm0tb3JpZ2luJywgZXZhbHUpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnYmFja2ZhY2UtdmlzaWJpbGl0eSc6XG4gICAgICAgIGV2YWx1ID0gZXZhbHUgPT09IDEgPyAndmlzaWJsZScgOiAnaGlkZGVuJztcbiAgICAgICAgJHRhcmdldC5maW5kKCcuY3ViZSBkaXYnKS5jc3MoZW5hbWUsIGV2YWx1KTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6IGJyZWFrO1xuICAgIH1cblxuICAgIC8vIHNob3dcbiAgICAkKHRoaXMpLnBhcmVudHMoJ2xpJykuZmluZCgnLnNob3cnKS50ZXh0KGV2YWx1KTtcbiAgfSk7XG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
