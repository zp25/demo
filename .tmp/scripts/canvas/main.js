'use strict';

/**
 * Tetris Base Class
 */
function Tetris() {}

/**
 * 俄罗斯方块O
 * @param {Object} ctx   canvas context
 * @param {String} color 背景颜色
 */
Tetris.prototype.drawO = function (ctx, color) {
  color = color || '#fe9805';

  ctx.beginPath();
  ctx.moveTo(0, 0);
  ctx.lineTo(16, 0);
  ctx.lineTo(16, 16);
  ctx.lineTo(0, 16);
  ctx.closePath();

  this.drawBorder(ctx);
  this.drawBackground(ctx, color);
};

/**
 * 俄罗斯方块Z
 * @param {Object} ctx   canvas context
 * @param {String} color 背景颜色
 */
Tetris.prototype.drawZ = function (ctx, color) {
  color = color || '#5c8ad0';

  ctx.beginPath();
  ctx.moveTo(0, 0);
  ctx.lineTo(16, 0);
  ctx.lineTo(16, 8);
  ctx.lineTo(24, 8);
  ctx.lineTo(24, 16);
  ctx.lineTo(8, 16);
  ctx.lineTo(8, 8);
  ctx.lineTo(0, 8);
  ctx.closePath();

  this.drawBorder(ctx);
  this.drawBackground(ctx, color);
};

/**
 * 俄罗斯方块T
 * @param {Object} ctx   canvas context
 * @param {String} color 背景颜色
 */
Tetris.prototype.drawT = function (ctx, color) {
  color = color || '#d33a2e';

  ctx.beginPath();
  ctx.moveTo(0, 0);
  ctx.lineTo(24, 0);
  ctx.lineTo(24, 8);
  ctx.lineTo(16, 8);
  ctx.lineTo(16, 16);
  ctx.lineTo(8, 16);
  ctx.lineTo(8, 8);
  ctx.lineTo(0, 8);
  ctx.closePath();

  this.drawBorder(ctx);
  this.drawBackground(ctx, color);
};

/**
 * 俄罗斯方块I
 * @param {Object} ctx   canvas context
 * @param {String} color 背景颜色
 */
Tetris.prototype.drawI = function (ctx, color) {
  color = color || '#3e9336';

  ctx.beginPath();
  ctx.moveTo(0, 0);
  ctx.lineTo(8, 0);
  ctx.lineTo(8, 32);
  ctx.lineTo(0, 32);
  ctx.closePath();

  this.drawBorder(ctx);
  this.drawBackground(ctx, color);
};

/**
 * 俄罗斯方块J
 * @param {Object} ctx   canvas context
 * @param {String} color 背景颜色
 */
Tetris.prototype.drawJ = function (ctx, color) {
  color = color || '#f6dc4b';

  ctx.beginPath();
  ctx.moveTo(0, 0);
  ctx.lineTo(8, 0);
  ctx.lineTo(8, 24);
  ctx.lineTo(-8, 24);
  ctx.lineTo(-8, 16);
  ctx.lineTo(0, 16);
  ctx.closePath();

  this.drawBorder(ctx);
  this.drawBackground(ctx, color);
};

/**
 * 俄罗斯方块L
 * @param {Object} ctx   canvas context
 * @param {String} color 背景颜色
 */
Tetris.prototype.drawL = function (ctx, color) {
  color = color || '#f6dc4b';

  ctx.beginPath();
  ctx.moveTo(0, 0);
  ctx.lineTo(16, 0);
  ctx.lineTo(16, 8);
  ctx.lineTo(8, 8);
  ctx.lineTo(8, 24);
  ctx.lineTo(0, 24);
  ctx.closePath();

  this.drawBorder(ctx);
  this.drawBackground(ctx, color);
};

/**
 * 绘制边框
 * @param {Object} ctx context
 */
Tetris.prototype.drawBorder = function (ctx) {
  ctx.lineWidth = 1;
  ctx.strokeStyle = '#fff';
  ctx.stroke();
};

/**
 * 填充背景色
 * @param {Object} ctx     canvas context
 * @param {String} bgcolor 背景颜色
 */
Tetris.prototype.drawBackground = function (ctx, bgcolor) {
  ctx.fillStyle = bgcolor;
  ctx.fill();
};

/**
 * text样式
 * @param {Object} ctx     canvas context
 * @param {String} txt text内容
 * @param {Number} x   x轴偏移量
 * @param {Number} y   y轴偏移量
 */
Tetris.prototype.setText = function (ctx, txt, x, y) {
  ctx.font = '25px "Helvetica Neue", Helvetica, Arial, sans-serif';
  ctx.fillStyle = '#dfdfdf';
  ctx.fillText(txt, x, y);
};

/**
 * Draw Tetris Class
 */
function DrawTetris() {}

/**
 * 继承自Tetris Class
 */
DrawTetris.prototype = Object.create(Tetris.prototype);
DrawTetris.prototype.constructor = DrawTetris;

/**
 * 绘制整幅图像
 * @param {Object} ctx context
 */
DrawTetris.prototype.drawAll = function (ctx) {
  // 主要图像距容器边线10px，加上5px的border
  ctx.save();
  ctx.translate(95, 95);
  ctx.scale(10, 10);
  this.drawO(ctx);
  ctx.restore();

  ctx.save();
  ctx.translate(335, 15);
  ctx.scale(10, 10);
  this.drawZ(ctx);
  ctx.restore();

  ctx.save();
  ctx.translate(255, 495);
  ctx.rotate(180 * Math.PI / 180);
  ctx.scale(10, 10);
  this.drawT(ctx);
  ctx.restore();

  ctx.save();
  ctx.translate(415, 215);
  ctx.scale(10, 10);
  this.drawI(ctx);
  ctx.restore();

  ctx.save();
  ctx.translate(295, 135);
  ctx.scale(10, 10);
  this.drawJ(ctx);
  ctx.restore();
};

/**
 * 缩放方块
 * @param  {Object} canvas canvas object
 * @param  {Object} ctx    context
 * @param  {Number} x      x轴偏移
 * @param  {Number} y      y轴偏移
 */
DrawTetris.prototype.drawTransform = function (canvas, ctx, x, y) {
  var s = 10.6;

  if (x > 95 && x < 255 && y > 95 && y < 255) {
    ctx.save();
    ctx.translate(90, 90);
    ctx.scale(s, s);
    this.drawO(ctx);
    ctx.restore();

    this.tetrisAct(canvas, 'www');
  } else if (x > 335 && x < 495 && y > 15 && y < 95 || x > 415 && x < 575 && y > 95 && y < 175) {
    ctx.save();
    ctx.translate(328, 10);
    ctx.scale(s, s);
    this.drawZ(ctx);
    ctx.restore();

    this.tetrisAct(canvas, 'lxl');
  } else if (x > 95 && x < 175 && y > 335 && y < 415 || x > 15 && x < 255 && y > 415 && y < 495) {
    ctx.save();
    ctx.translate(263, 500);
    ctx.save();
    ctx.rotate(180 * Math.PI / 180);
    ctx.scale(s, s);
    this.drawT(ctx);
    ctx.restore();
    ctx.restore();

    this.tetrisAct(canvas, 'xia');
  } else if (x > 415 && x < 495 && y > 215 && y < 535) {
    ctx.save();
    ctx.translate(413, 205);
    ctx.scale(s, s);
    this.drawI(ctx);
    ctx.restore();

    this.tetrisAct(canvas, 'zp');
  } else if (x > 215 && x < 295 && y > 295 && y < 375 || x > 295 && x < 375 && y > 135 && y < 375) {
    ctx.save();
    ctx.translate(292, 128);
    ctx.scale(s, s);
    this.drawJ(ctx);
    ctx.restore();

    this.tetrisAct(canvas, 'dii');
  } else {
    ctx.clearRect(0, 0, 590, 550);
    this.drawAll(ctx);

    canvas.onclick = null;
    canvas.style.cursor = '';
  }
};

DrawTetris.prototype.tetrisAct = function (canvas, lct) {
  canvas.onclick = function () {
    // window.open('http://'+lct+'.rensidiaochaotian.com/');
    console.log('Open: http://' + lct + '.rensidiaochaotian.com/');
  };

  canvas.style.cursor = 'pointer';
};

/** Onload Event */
window.addEventListener('load', function () {
  var canvas = document.getElementById('fpDoodle');
  var ctx = canvas.getContext('2d');
  var tetris = new DrawTetris();
  var x;
  var y;

  tetris.drawAll(ctx);

  canvas.onmousemove = function (e) {
    var t = e.currentTarget;

    x = e.pageX - t.offsetLeft;
    y = e.pageY - t.offsetTop;

    tetris.drawTransform(t, ctx, x, y);
  };
}, false);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhbnZhcy9tYWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBR0EsU0FBUyxNQUFNLEdBQUcsRUFBRTs7Ozs7OztBQUFBLEFBT3BCLE1BQU0sQ0FBQyxTQUFTLENBQUMsS0FBSyxHQUFHLFVBQVMsR0FBRyxFQUFFLEtBQUssRUFBRTtBQUM1QyxPQUFLLEdBQUcsS0FBSyxJQUFJLFNBQVMsQ0FBQzs7QUFFM0IsS0FBRyxDQUFDLFNBQVMsRUFBRSxDQUFDO0FBQ2hCLEtBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ2pCLEtBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ2xCLEtBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ25CLEtBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ2xCLEtBQUcsQ0FBQyxTQUFTLEVBQUUsQ0FBQzs7QUFFaEIsTUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNyQixNQUFJLENBQUMsY0FBYyxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQztDQUNqQzs7Ozs7OztBQUFDLEFBT0YsTUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsVUFBUyxHQUFHLEVBQUUsS0FBSyxFQUFFO0FBQzVDLE9BQUssR0FBRyxLQUFLLElBQUksU0FBUyxDQUFDOztBQUUzQixLQUFHLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDaEIsS0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDakIsS0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDbEIsS0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDbEIsS0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDbEIsS0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDbkIsS0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDbEIsS0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDakIsS0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDakIsS0FBRyxDQUFDLFNBQVMsRUFBRSxDQUFDOztBQUVoQixNQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3JCLE1BQUksQ0FBQyxjQUFjLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDO0NBQ2pDOzs7Ozs7O0FBQUMsQUFPRixNQUFNLENBQUMsU0FBUyxDQUFDLEtBQUssR0FBRyxVQUFTLEdBQUcsRUFBRSxLQUFLLEVBQUU7QUFDNUMsT0FBSyxHQUFHLEtBQUssSUFBSSxTQUFTLENBQUM7O0FBRTNCLEtBQUcsQ0FBQyxTQUFTLEVBQUUsQ0FBQztBQUNoQixLQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNqQixLQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNsQixLQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNsQixLQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNsQixLQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUNuQixLQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUNsQixLQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNqQixLQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNqQixLQUFHLENBQUMsU0FBUyxFQUFFLENBQUM7O0FBRWhCLE1BQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDckIsTUFBSSxDQUFDLGNBQWMsQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUM7Q0FDakM7Ozs7Ozs7QUFBQyxBQU9GLE1BQU0sQ0FBQyxTQUFTLENBQUMsS0FBSyxHQUFHLFVBQVMsR0FBRyxFQUFFLEtBQUssRUFBRTtBQUM1QyxPQUFLLEdBQUcsS0FBSyxJQUFJLFNBQVMsQ0FBQzs7QUFFM0IsS0FBRyxDQUFDLFNBQVMsRUFBRSxDQUFDO0FBQ2hCLEtBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ2pCLEtBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ2pCLEtBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ2xCLEtBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ2xCLEtBQUcsQ0FBQyxTQUFTLEVBQUUsQ0FBQzs7QUFFaEIsTUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNyQixNQUFJLENBQUMsY0FBYyxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQztDQUNqQzs7Ozs7OztBQUFDLEFBT0YsTUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsVUFBUyxHQUFHLEVBQUUsS0FBSyxFQUFFO0FBQzVDLE9BQUssR0FBRyxLQUFLLElBQUksU0FBUyxDQUFDOztBQUUzQixLQUFHLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDaEIsS0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDakIsS0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDakIsS0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDbEIsS0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUNuQixLQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ25CLEtBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ2xCLEtBQUcsQ0FBQyxTQUFTLEVBQUUsQ0FBQzs7QUFFaEIsTUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNyQixNQUFJLENBQUMsY0FBYyxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQztDQUNqQzs7Ozs7OztBQUFDLEFBT0YsTUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsVUFBUyxHQUFHLEVBQUUsS0FBSyxFQUFFO0FBQzVDLE9BQUssR0FBRyxLQUFLLElBQUksU0FBUyxDQUFDOztBQUUzQixLQUFHLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDaEIsS0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDakIsS0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDbEIsS0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDbEIsS0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDakIsS0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDbEIsS0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDbEIsS0FBRyxDQUFDLFNBQVMsRUFBRSxDQUFDOztBQUVoQixNQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3JCLE1BQUksQ0FBQyxjQUFjLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDO0NBQ2pDOzs7Ozs7QUFBQyxBQU1GLE1BQU0sQ0FBQyxTQUFTLENBQUMsVUFBVSxHQUFHLFVBQVMsR0FBRyxFQUFFO0FBQzFDLEtBQUcsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDO0FBQ2xCLEtBQUcsQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDO0FBQ3pCLEtBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQztDQUNkOzs7Ozs7O0FBQUMsQUFPRixNQUFNLENBQUMsU0FBUyxDQUFDLGNBQWMsR0FBRyxVQUFTLEdBQUcsRUFBRSxPQUFPLEVBQUU7QUFDdkQsS0FBRyxDQUFDLFNBQVMsR0FBRyxPQUFPLENBQUM7QUFDeEIsS0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO0NBQ1o7Ozs7Ozs7OztBQUFDLEFBU0YsTUFBTSxDQUFDLFNBQVMsQ0FBQyxPQUFPLEdBQUcsVUFBUyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDbEQsS0FBRyxDQUFDLElBQUksR0FBRyxxREFBcUQsQ0FBQztBQUNqRSxLQUFHLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztBQUMxQixLQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7Q0FDekI7Ozs7O0FBQUMsQUFLRixTQUFTLFVBQVUsR0FBRyxFQUFFOzs7OztBQUFBLEFBS3hCLFVBQVUsQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDdkQsVUFBVSxDQUFDLFNBQVMsQ0FBQyxXQUFXLEdBQUcsVUFBVTs7Ozs7O0FBQUMsQUFNOUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxPQUFPLEdBQUcsVUFBUyxHQUFHLEVBQUU7O0FBRTNDLEtBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNYLEtBQUcsQ0FBQyxTQUFTLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ3RCLEtBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ2xCLE1BQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDaEIsS0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDOztBQUVkLEtBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNYLEtBQUcsQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ3ZCLEtBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ2xCLE1BQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDaEIsS0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDOztBQUVkLEtBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNYLEtBQUcsQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQ3hCLEtBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxFQUFFLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFDaEMsS0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDbEIsTUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNoQixLQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7O0FBRWQsS0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1gsS0FBRyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDeEIsS0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDbEIsTUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNoQixLQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7O0FBRWQsS0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1gsS0FBRyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDeEIsS0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDbEIsTUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNoQixLQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7Q0FDZjs7Ozs7Ozs7O0FBQUMsQUFTRixVQUFVLENBQUMsU0FBUyxDQUFDLGFBQWEsR0FBRyxVQUFTLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUMvRCxNQUFJLENBQUMsR0FBRyxJQUFJLENBQUM7O0FBRWIsTUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUcsR0FBRyxFQUFFO0FBQzFDLE9BQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNYLE9BQUcsQ0FBQyxTQUFTLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ3RCLE9BQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ2hCLFFBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDaEIsT0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDOztBQUVkLFFBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFDO0dBQy9CLE1BQU0sSUFBSSxBQUFDLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLElBQ3RDLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxHQUFHLEFBQUMsRUFBRTtBQUNwRCxPQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWCxPQUFHLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUN2QixPQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNoQixRQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ2hCLE9BQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQzs7QUFFZCxRQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQztHQUMvQixNQUFNLElBQUksQUFBQyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUN2QyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsR0FBRyxBQUFDLEVBQUU7QUFDcEQsT0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1gsT0FBRyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDeEIsT0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1gsT0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEVBQUUsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUNoQyxPQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNoQixRQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ2hCLE9BQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUNkLE9BQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQzs7QUFFZCxRQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQztHQUMvQixNQUFNLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLEdBQUcsRUFBRTtBQUNuRCxPQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDWCxPQUFHLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUN4QixPQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNoQixRQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ2hCLE9BQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQzs7QUFFZCxRQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztHQUM5QixNQUFNLElBQUksQUFBQyxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUN4QyxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsR0FBRyxBQUFDLEVBQUU7QUFDckQsT0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ1gsT0FBRyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDeEIsT0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDaEIsUUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNoQixPQUFHLENBQUMsT0FBTyxFQUFFLENBQUM7O0FBRWQsUUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7R0FDL0IsTUFBTTtBQUNMLE9BQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDOUIsUUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQzs7QUFFbEIsVUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7QUFDdEIsVUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO0dBQzFCO0NBQ0YsQ0FBQzs7QUFFRixVQUFVLENBQUMsU0FBUyxDQUFDLFNBQVMsR0FBRyxVQUFTLE1BQU0sRUFBRSxHQUFHLEVBQUU7QUFDckQsUUFBTSxDQUFDLE9BQU8sR0FBRyxZQUFXOztBQUUxQixXQUFPLENBQUMsR0FBRyxDQUFDLGVBQWUsR0FBRyxHQUFHLEdBQUcseUJBQXlCLENBQUMsQ0FBQztHQUNoRSxDQUFDOztBQUVGLFFBQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLFNBQVMsQ0FBQztDQUNqQzs7O0FBQUMsQUFHRixNQUFNLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFLFlBQVc7QUFDekMsTUFBSSxNQUFNLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNqRCxNQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2xDLE1BQUksTUFBTSxHQUFHLElBQUksVUFBVSxFQUFFLENBQUM7QUFDOUIsTUFBSSxDQUFDLENBQUM7QUFDTixNQUFJLENBQUMsQ0FBQzs7QUFFTixRQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDOztBQUVwQixRQUFNLENBQUMsV0FBVyxHQUFHLFVBQVMsQ0FBQyxFQUFFO0FBQy9CLFFBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxhQUFhLENBQUM7O0FBRXhCLEtBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxVQUFVLENBQUM7QUFDM0IsS0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQzs7QUFFMUIsVUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztHQUNwQyxDQUFDO0NBQ0gsRUFBRSxLQUFLLENBQUMsQ0FBQyIsImZpbGUiOiJjYW52YXMvbWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGV0cmlzIEJhc2UgQ2xhc3NcbiAqL1xuZnVuY3Rpb24gVGV0cmlzKCkge31cblxuLyoqXG4gKiDkv4TnvZfmlq/mlrnlnZdPXG4gKiBAcGFyYW0ge09iamVjdH0gY3R4ICAgY2FudmFzIGNvbnRleHRcbiAqIEBwYXJhbSB7U3RyaW5nfSBjb2xvciDog4zmma/popzoibJcbiAqL1xuVGV0cmlzLnByb3RvdHlwZS5kcmF3TyA9IGZ1bmN0aW9uKGN0eCwgY29sb3IpIHtcbiAgY29sb3IgPSBjb2xvciB8fCAnI2ZlOTgwNSc7XG5cbiAgY3R4LmJlZ2luUGF0aCgpO1xuICBjdHgubW92ZVRvKDAsIDApO1xuICBjdHgubGluZVRvKDE2LCAwKTtcbiAgY3R4LmxpbmVUbygxNiwgMTYpO1xuICBjdHgubGluZVRvKDAsIDE2KTtcbiAgY3R4LmNsb3NlUGF0aCgpO1xuXG4gIHRoaXMuZHJhd0JvcmRlcihjdHgpO1xuICB0aGlzLmRyYXdCYWNrZ3JvdW5kKGN0eCwgY29sb3IpO1xufTtcblxuLyoqXG4gKiDkv4TnvZfmlq/mlrnlnZdaXG4gKiBAcGFyYW0ge09iamVjdH0gY3R4ICAgY2FudmFzIGNvbnRleHRcbiAqIEBwYXJhbSB7U3RyaW5nfSBjb2xvciDog4zmma/popzoibJcbiAqL1xuVGV0cmlzLnByb3RvdHlwZS5kcmF3WiA9IGZ1bmN0aW9uKGN0eCwgY29sb3IpIHtcbiAgY29sb3IgPSBjb2xvciB8fCAnIzVjOGFkMCc7XG5cbiAgY3R4LmJlZ2luUGF0aCgpO1xuICBjdHgubW92ZVRvKDAsIDApO1xuICBjdHgubGluZVRvKDE2LCAwKTtcbiAgY3R4LmxpbmVUbygxNiwgOCk7XG4gIGN0eC5saW5lVG8oMjQsIDgpO1xuICBjdHgubGluZVRvKDI0LCAxNik7XG4gIGN0eC5saW5lVG8oOCwgMTYpO1xuICBjdHgubGluZVRvKDgsIDgpO1xuICBjdHgubGluZVRvKDAsIDgpO1xuICBjdHguY2xvc2VQYXRoKCk7XG5cbiAgdGhpcy5kcmF3Qm9yZGVyKGN0eCk7XG4gIHRoaXMuZHJhd0JhY2tncm91bmQoY3R4LCBjb2xvcik7XG59O1xuXG4vKipcbiAqIOS/hOe9l+aWr+aWueWdl1RcbiAqIEBwYXJhbSB7T2JqZWN0fSBjdHggICBjYW52YXMgY29udGV4dFxuICogQHBhcmFtIHtTdHJpbmd9IGNvbG9yIOiDjOaZr+minOiJslxuICovXG5UZXRyaXMucHJvdG90eXBlLmRyYXdUID0gZnVuY3Rpb24oY3R4LCBjb2xvcikge1xuICBjb2xvciA9IGNvbG9yIHx8ICcjZDMzYTJlJztcblxuICBjdHguYmVnaW5QYXRoKCk7XG4gIGN0eC5tb3ZlVG8oMCwgMCk7XG4gIGN0eC5saW5lVG8oMjQsIDApO1xuICBjdHgubGluZVRvKDI0LCA4KTtcbiAgY3R4LmxpbmVUbygxNiwgOCk7XG4gIGN0eC5saW5lVG8oMTYsIDE2KTtcbiAgY3R4LmxpbmVUbyg4LCAxNik7XG4gIGN0eC5saW5lVG8oOCwgOCk7XG4gIGN0eC5saW5lVG8oMCwgOCk7XG4gIGN0eC5jbG9zZVBhdGgoKTtcblxuICB0aGlzLmRyYXdCb3JkZXIoY3R4KTtcbiAgdGhpcy5kcmF3QmFja2dyb3VuZChjdHgsIGNvbG9yKTtcbn07XG5cbi8qKlxuICog5L+E572X5pav5pa55Z2XSVxuICogQHBhcmFtIHtPYmplY3R9IGN0eCAgIGNhbnZhcyBjb250ZXh0XG4gKiBAcGFyYW0ge1N0cmluZ30gY29sb3Ig6IOM5pmv6aKc6ImyXG4gKi9cblRldHJpcy5wcm90b3R5cGUuZHJhd0kgPSBmdW5jdGlvbihjdHgsIGNvbG9yKSB7XG4gIGNvbG9yID0gY29sb3IgfHwgJyMzZTkzMzYnO1xuXG4gIGN0eC5iZWdpblBhdGgoKTtcbiAgY3R4Lm1vdmVUbygwLCAwKTtcbiAgY3R4LmxpbmVUbyg4LCAwKTtcbiAgY3R4LmxpbmVUbyg4LCAzMik7XG4gIGN0eC5saW5lVG8oMCwgMzIpO1xuICBjdHguY2xvc2VQYXRoKCk7XG5cbiAgdGhpcy5kcmF3Qm9yZGVyKGN0eCk7XG4gIHRoaXMuZHJhd0JhY2tncm91bmQoY3R4LCBjb2xvcik7XG59O1xuXG4vKipcbiAqIOS/hOe9l+aWr+aWueWdl0pcbiAqIEBwYXJhbSB7T2JqZWN0fSBjdHggICBjYW52YXMgY29udGV4dFxuICogQHBhcmFtIHtTdHJpbmd9IGNvbG9yIOiDjOaZr+minOiJslxuICovXG5UZXRyaXMucHJvdG90eXBlLmRyYXdKID0gZnVuY3Rpb24oY3R4LCBjb2xvcikge1xuICBjb2xvciA9IGNvbG9yIHx8ICcjZjZkYzRiJztcblxuICBjdHguYmVnaW5QYXRoKCk7XG4gIGN0eC5tb3ZlVG8oMCwgMCk7XG4gIGN0eC5saW5lVG8oOCwgMCk7XG4gIGN0eC5saW5lVG8oOCwgMjQpO1xuICBjdHgubGluZVRvKC04LCAyNCk7XG4gIGN0eC5saW5lVG8oLTgsIDE2KTtcbiAgY3R4LmxpbmVUbygwLCAxNik7XG4gIGN0eC5jbG9zZVBhdGgoKTtcblxuICB0aGlzLmRyYXdCb3JkZXIoY3R4KTtcbiAgdGhpcy5kcmF3QmFja2dyb3VuZChjdHgsIGNvbG9yKTtcbn07XG5cbi8qKlxuICog5L+E572X5pav5pa55Z2XTFxuICogQHBhcmFtIHtPYmplY3R9IGN0eCAgIGNhbnZhcyBjb250ZXh0XG4gKiBAcGFyYW0ge1N0cmluZ30gY29sb3Ig6IOM5pmv6aKc6ImyXG4gKi9cblRldHJpcy5wcm90b3R5cGUuZHJhd0wgPSBmdW5jdGlvbihjdHgsIGNvbG9yKSB7XG4gIGNvbG9yID0gY29sb3IgfHwgJyNmNmRjNGInO1xuXG4gIGN0eC5iZWdpblBhdGgoKTtcbiAgY3R4Lm1vdmVUbygwLCAwKTtcbiAgY3R4LmxpbmVUbygxNiwgMCk7XG4gIGN0eC5saW5lVG8oMTYsIDgpO1xuICBjdHgubGluZVRvKDgsIDgpO1xuICBjdHgubGluZVRvKDgsIDI0KTtcbiAgY3R4LmxpbmVUbygwLCAyNCk7XG4gIGN0eC5jbG9zZVBhdGgoKTtcblxuICB0aGlzLmRyYXdCb3JkZXIoY3R4KTtcbiAgdGhpcy5kcmF3QmFja2dyb3VuZChjdHgsIGNvbG9yKTtcbn07XG5cbi8qKlxuICog57uY5Yi26L655qGGXG4gKiBAcGFyYW0ge09iamVjdH0gY3R4IGNvbnRleHRcbiAqL1xuVGV0cmlzLnByb3RvdHlwZS5kcmF3Qm9yZGVyID0gZnVuY3Rpb24oY3R4KSB7XG4gIGN0eC5saW5lV2lkdGggPSAxO1xuICBjdHguc3Ryb2tlU3R5bGUgPSAnI2ZmZic7XG4gIGN0eC5zdHJva2UoKTtcbn07XG5cbi8qKlxuICog5aGr5YWF6IOM5pmv6ImyXG4gKiBAcGFyYW0ge09iamVjdH0gY3R4ICAgICBjYW52YXMgY29udGV4dFxuICogQHBhcmFtIHtTdHJpbmd9IGJnY29sb3Ig6IOM5pmv6aKc6ImyXG4gKi9cblRldHJpcy5wcm90b3R5cGUuZHJhd0JhY2tncm91bmQgPSBmdW5jdGlvbihjdHgsIGJnY29sb3IpIHtcbiAgY3R4LmZpbGxTdHlsZSA9IGJnY29sb3I7XG4gIGN0eC5maWxsKCk7XG59O1xuXG4vKipcbiAqIHRleHTmoLflvI9cbiAqIEBwYXJhbSB7T2JqZWN0fSBjdHggICAgIGNhbnZhcyBjb250ZXh0XG4gKiBAcGFyYW0ge1N0cmluZ30gdHh0IHRleHTlhoXlrrlcbiAqIEBwYXJhbSB7TnVtYmVyfSB4ICAgeOi9tOWBj+enu+mHj1xuICogQHBhcmFtIHtOdW1iZXJ9IHkgICB56L205YGP56e76YePXG4gKi9cblRldHJpcy5wcm90b3R5cGUuc2V0VGV4dCA9IGZ1bmN0aW9uKGN0eCwgdHh0LCB4LCB5KSB7XG4gIGN0eC5mb250ID0gJzI1cHggXCJIZWx2ZXRpY2EgTmV1ZVwiLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmJztcbiAgY3R4LmZpbGxTdHlsZSA9ICcjZGZkZmRmJztcbiAgY3R4LmZpbGxUZXh0KHR4dCwgeCwgeSk7XG59O1xuXG4vKipcbiAqIERyYXcgVGV0cmlzIENsYXNzXG4gKi9cbmZ1bmN0aW9uIERyYXdUZXRyaXMoKSB7fVxuXG4vKipcbiAqIOe7p+aJv+iHqlRldHJpcyBDbGFzc1xuICovXG5EcmF3VGV0cmlzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoVGV0cmlzLnByb3RvdHlwZSk7XG5EcmF3VGV0cmlzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IERyYXdUZXRyaXM7XG5cbi8qKlxuICog57uY5Yi25pW05bmF5Zu+5YOPXG4gKiBAcGFyYW0ge09iamVjdH0gY3R4IGNvbnRleHRcbiAqL1xuRHJhd1RldHJpcy5wcm90b3R5cGUuZHJhd0FsbCA9IGZ1bmN0aW9uKGN0eCkge1xuICAvLyDkuLvopoHlm77lg4/ot53lrrnlmajovrnnur8xMHB477yM5Yqg5LiKNXB455qEYm9yZGVyXG4gIGN0eC5zYXZlKCk7XG4gIGN0eC50cmFuc2xhdGUoOTUsIDk1KTtcbiAgY3R4LnNjYWxlKDEwLCAxMCk7XG4gIHRoaXMuZHJhd08oY3R4KTtcbiAgY3R4LnJlc3RvcmUoKTtcblxuICBjdHguc2F2ZSgpO1xuICBjdHgudHJhbnNsYXRlKDMzNSwgMTUpO1xuICBjdHguc2NhbGUoMTAsIDEwKTtcbiAgdGhpcy5kcmF3WihjdHgpO1xuICBjdHgucmVzdG9yZSgpO1xuXG4gIGN0eC5zYXZlKCk7XG4gIGN0eC50cmFuc2xhdGUoMjU1LCA0OTUpO1xuICBjdHgucm90YXRlKDE4MCAqIE1hdGguUEkgLyAxODApO1xuICBjdHguc2NhbGUoMTAsIDEwKTtcbiAgdGhpcy5kcmF3VChjdHgpO1xuICBjdHgucmVzdG9yZSgpO1xuXG4gIGN0eC5zYXZlKCk7XG4gIGN0eC50cmFuc2xhdGUoNDE1LCAyMTUpO1xuICBjdHguc2NhbGUoMTAsIDEwKTtcbiAgdGhpcy5kcmF3SShjdHgpO1xuICBjdHgucmVzdG9yZSgpO1xuXG4gIGN0eC5zYXZlKCk7XG4gIGN0eC50cmFuc2xhdGUoMjk1LCAxMzUpO1xuICBjdHguc2NhbGUoMTAsIDEwKTtcbiAgdGhpcy5kcmF3SihjdHgpO1xuICBjdHgucmVzdG9yZSgpO1xufTtcblxuLyoqXG4gKiDnvKnmlL7mlrnlnZdcbiAqIEBwYXJhbSAge09iamVjdH0gY2FudmFzIGNhbnZhcyBvYmplY3RcbiAqIEBwYXJhbSAge09iamVjdH0gY3R4ICAgIGNvbnRleHRcbiAqIEBwYXJhbSAge051bWJlcn0geCAgICAgIHjovbTlgY/np7tcbiAqIEBwYXJhbSAge051bWJlcn0geSAgICAgIHnovbTlgY/np7tcbiAqL1xuRHJhd1RldHJpcy5wcm90b3R5cGUuZHJhd1RyYW5zZm9ybSA9IGZ1bmN0aW9uKGNhbnZhcywgY3R4LCB4LCB5KSB7XG4gIHZhciBzID0gMTAuNjtcblxuICBpZiAoeCA+IDk1ICYmIHggPCAyNTUgJiYgeSA+IDk1ICYmIHkgPCAyNTUpIHtcbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC50cmFuc2xhdGUoOTAsIDkwKTtcbiAgICBjdHguc2NhbGUocywgcyk7XG4gICAgdGhpcy5kcmF3TyhjdHgpO1xuICAgIGN0eC5yZXN0b3JlKCk7XG5cbiAgICB0aGlzLnRldHJpc0FjdChjYW52YXMsICd3d3cnKTtcbiAgfSBlbHNlIGlmICgoeCA+IDMzNSAmJiB4IDwgNDk1ICYmIHkgPiAxNSAmJiB5IDwgOTUpIHx8XG4gICAgICAgICAgICAgKHggPiA0MTUgJiYgeCA8IDU3NSAmJiB5ID4gOTUgJiYgeSA8IDE3NSkpIHtcbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC50cmFuc2xhdGUoMzI4LCAxMCk7XG4gICAgY3R4LnNjYWxlKHMsIHMpO1xuICAgIHRoaXMuZHJhd1ooY3R4KTtcbiAgICBjdHgucmVzdG9yZSgpO1xuXG4gICAgdGhpcy50ZXRyaXNBY3QoY2FudmFzLCAnbHhsJyk7XG4gIH0gZWxzZSBpZiAoKHggPiA5NSAmJiB4IDwgMTc1ICYmIHkgPiAzMzUgJiYgeSA8IDQxNSkgfHxcbiAgICAgICAgICAgICAoeCA+IDE1ICYmIHggPCAyNTUgJiYgeSA+IDQxNSAmJiB5IDwgNDk1KSkge1xuICAgIGN0eC5zYXZlKCk7XG4gICAgY3R4LnRyYW5zbGF0ZSgyNjMsIDUwMCk7XG4gICAgY3R4LnNhdmUoKTtcbiAgICBjdHgucm90YXRlKDE4MCAqIE1hdGguUEkgLyAxODApO1xuICAgIGN0eC5zY2FsZShzLCBzKTtcbiAgICB0aGlzLmRyYXdUKGN0eCk7XG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgICBjdHgucmVzdG9yZSgpO1xuXG4gICAgdGhpcy50ZXRyaXNBY3QoY2FudmFzLCAneGlhJyk7XG4gIH0gZWxzZSBpZiAoeCA+IDQxNSAmJiB4IDwgNDk1ICYmIHkgPiAyMTUgJiYgeSA8IDUzNSkge1xuICAgIGN0eC5zYXZlKCk7XG4gICAgY3R4LnRyYW5zbGF0ZSg0MTMsIDIwNSk7XG4gICAgY3R4LnNjYWxlKHMsIHMpO1xuICAgIHRoaXMuZHJhd0koY3R4KTtcbiAgICBjdHgucmVzdG9yZSgpO1xuXG4gICAgdGhpcy50ZXRyaXNBY3QoY2FudmFzLCAnenAnKTtcbiAgfSBlbHNlIGlmICgoeCA+IDIxNSAmJiB4IDwgMjk1ICYmIHkgPiAyOTUgJiYgeSA8IDM3NSkgfHxcbiAgICAgICAgICAgICAoeCA+IDI5NSAmJiB4IDwgMzc1ICYmIHkgPiAxMzUgJiYgeSA8IDM3NSkpIHtcbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC50cmFuc2xhdGUoMjkyLCAxMjgpO1xuICAgIGN0eC5zY2FsZShzLCBzKTtcbiAgICB0aGlzLmRyYXdKKGN0eCk7XG4gICAgY3R4LnJlc3RvcmUoKTtcblxuICAgIHRoaXMudGV0cmlzQWN0KGNhbnZhcywgJ2RpaScpO1xuICB9IGVsc2Uge1xuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgNTkwLCA1NTApO1xuICAgIHRoaXMuZHJhd0FsbChjdHgpO1xuXG4gICAgY2FudmFzLm9uY2xpY2sgPSBudWxsO1xuICAgIGNhbnZhcy5zdHlsZS5jdXJzb3IgPSAnJztcbiAgfVxufTtcblxuRHJhd1RldHJpcy5wcm90b3R5cGUudGV0cmlzQWN0ID0gZnVuY3Rpb24oY2FudmFzLCBsY3QpIHtcbiAgY2FudmFzLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAvLyB3aW5kb3cub3BlbignaHR0cDovLycrbGN0KycucmVuc2lkaWFvY2hhb3RpYW4uY29tLycpO1xuICAgIGNvbnNvbGUubG9nKCdPcGVuOiBodHRwOi8vJyArIGxjdCArICcucmVuc2lkaWFvY2hhb3RpYW4uY29tLycpO1xuICB9O1xuXG4gIGNhbnZhcy5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG59O1xuXG4vKiogT25sb2FkIEV2ZW50ICovXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCkge1xuICB2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZwRG9vZGxlJyk7XG4gIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgdmFyIHRldHJpcyA9IG5ldyBEcmF3VGV0cmlzKCk7XG4gIHZhciB4O1xuICB2YXIgeTtcblxuICB0ZXRyaXMuZHJhd0FsbChjdHgpO1xuXG4gIGNhbnZhcy5vbm1vdXNlbW92ZSA9IGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgdCA9IGUuY3VycmVudFRhcmdldDtcblxuICAgIHggPSBlLnBhZ2VYIC0gdC5vZmZzZXRMZWZ0O1xuICAgIHkgPSBlLnBhZ2VZIC0gdC5vZmZzZXRUb3A7XG5cbiAgICB0ZXRyaXMuZHJhd1RyYW5zZm9ybSh0LCBjdHgsIHgsIHkpO1xuICB9O1xufSwgZmFsc2UpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
