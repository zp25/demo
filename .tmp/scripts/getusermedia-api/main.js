'use strict';

(function () {
  if (!navigator.mediaDevices) {
    console.log('Error! Use FF36+');
    return;
  }

  var video = document.querySelector('video');
  var canvas = document.querySelector('canvas');
  var ctx = canvas.getContext('2d');

  // list media devices
  var devices = navigator.mediaDevices.enumerateDevices();

  devices.then(function (devices) {
    devices.forEach(function (device) {
      console.log(device.kind + ': ' + device.label + ' ' + 'id = ' + device.deviceId);
    });
  }).catch(function (err) {
    console.log(err.name + ': ' + err.message);
  });

  // use
  var p = navigator.mediaDevices.getUserMedia({ video: true });

  p.then(function (stream) {
    var imgURL = window.URL.createObjectURL(stream);

    video.src = imgURL;

    video.onloadedmetadata = function () {
      window.URL.revokeObjectURL(imgURL);
    };
  }).catch(function (err) {
    console.log(err.name + ': ' + err.message);
  });

  // snap
  document.querySelector('.snap').onclick = function (e) {
    e.preventDefault();

    ctx.drawImage(video, 0, 0, 450, 350);
  };
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldHVzZXJtZWRpYS1hcGkvbWFpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLENBQUMsWUFBVztBQUNWLE1BQUksQ0FBQyxTQUFTLENBQUMsWUFBWSxFQUFFO0FBQzNCLFdBQU8sQ0FBQyxHQUFHLENBQUMsa0JBQWtCLENBQUMsQ0FBQztBQUNoQyxXQUFPO0dBQ1I7O0FBRUQsTUFBSSxLQUFLLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUM1QyxNQUFJLE1BQU0sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzlDLE1BQUksR0FBRyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDOzs7QUFBQyxBQUdsQyxNQUFJLE9BQU8sR0FBRyxTQUFTLENBQUMsWUFBWSxDQUFDLGdCQUFnQixFQUFFLENBQUM7O0FBRXhELFNBQU8sQ0FBQyxJQUFJLENBQUMsVUFBUyxPQUFPLEVBQUU7QUFDN0IsV0FBTyxDQUFDLE9BQU8sQ0FBQyxVQUFTLE1BQU0sRUFBRTtBQUMvQixhQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEdBQUcsSUFBSSxHQUFHLE1BQU0sQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUNqRCxPQUFPLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0tBQzlCLENBQUMsQ0FBQztHQUNKLENBQUMsQ0FBQyxLQUFLLENBQUMsVUFBUyxHQUFHLEVBQUU7QUFDckIsV0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsSUFBSSxHQUFHLElBQUksR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7R0FDNUMsQ0FBQzs7O0FBQUMsQUFHSCxNQUFJLENBQUMsR0FBRyxTQUFTLENBQUMsWUFBWSxDQUFDLFlBQVksQ0FBQyxFQUFDLEtBQUssRUFBRSxJQUFJLEVBQUMsQ0FBQyxDQUFDOztBQUUzRCxHQUFDLENBQUMsSUFBSSxDQUFDLFVBQVMsTUFBTSxFQUFFO0FBQ3RCLFFBQUksTUFBTSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxDQUFDOztBQUVoRCxTQUFLLENBQUMsR0FBRyxHQUFHLE1BQU0sQ0FBQzs7QUFFbkIsU0FBSyxDQUFDLGdCQUFnQixHQUFHLFlBQVc7QUFDbEMsWUFBTSxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLENBQUM7S0FDcEMsQ0FBQztHQUNILENBQUMsQ0FBQyxLQUFLLENBQUMsVUFBUyxHQUFHLEVBQUU7QUFDckIsV0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsSUFBSSxHQUFHLElBQUksR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7R0FDNUMsQ0FBQzs7O0FBQUMsQUFHSCxVQUFRLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sR0FBRyxVQUFTLENBQUMsRUFBRTtBQUNwRCxLQUFDLENBQUMsY0FBYyxFQUFFLENBQUM7O0FBRW5CLE9BQUcsQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0dBQ3RDLENBQUM7Q0FDSCxDQUFBLEVBQUcsQ0FBQyIsImZpbGUiOiJnZXR1c2VybWVkaWEtYXBpL21haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKSB7XG4gIGlmICghbmF2aWdhdG9yLm1lZGlhRGV2aWNlcykge1xuICAgIGNvbnNvbGUubG9nKCdFcnJvciEgVXNlIEZGMzYrJyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIHZpZGVvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndmlkZW8nKTtcbiAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2NhbnZhcycpO1xuICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbiAgLy8gbGlzdCBtZWRpYSBkZXZpY2VzXG4gIHZhciBkZXZpY2VzID0gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCk7XG5cbiAgZGV2aWNlcy50aGVuKGZ1bmN0aW9uKGRldmljZXMpIHtcbiAgICBkZXZpY2VzLmZvckVhY2goZnVuY3Rpb24oZGV2aWNlKSB7XG4gICAgICBjb25zb2xlLmxvZyhkZXZpY2Uua2luZCArICc6ICcgKyBkZXZpY2UubGFiZWwgKyAnICcgK1xuICAgICAgICAnaWQgPSAnICsgZGV2aWNlLmRldmljZUlkKTtcbiAgICB9KTtcbiAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XG4gICAgY29uc29sZS5sb2coZXJyLm5hbWUgKyAnOiAnICsgZXJyLm1lc3NhZ2UpO1xuICB9KTtcblxuICAvLyB1c2VcbiAgdmFyIHAgPSBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7dmlkZW86IHRydWV9KTtcblxuICBwLnRoZW4oZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgdmFyIGltZ1VSTCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKHN0cmVhbSk7XG5cbiAgICB2aWRlby5zcmMgPSBpbWdVUkw7XG5cbiAgICB2aWRlby5vbmxvYWRlZG1ldGFkYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTChpbWdVUkwpO1xuICAgIH07XG4gIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgIGNvbnNvbGUubG9nKGVyci5uYW1lICsgJzogJyArIGVyci5tZXNzYWdlKTtcbiAgfSk7XG5cbiAgLy8gc25hcFxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc25hcCcpLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgY3R4LmRyYXdJbWFnZSh2aWRlbywgMCwgMCwgNDUwLCAzNTApO1xuICB9O1xufSkoKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
