<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
  <title>HTML5 Demos - Battery Status API</title>
  <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
  <link rel="stylesheet" type="text/css" href="css/style.css">
</head>

<body>

  <header>
    <div class="header-wrapper">
      <h1>DEMOs</h1>
      <a href="/">导航页</a>
    </div>
  </header>

  <main>
    <section class="demo-sections">
      <p>4个属性，4个事件</p>
      <ul>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
      </ul>
    </section>
  </main>

  <script>
    (function() {
      var output = document.querySelector('.output');

      navigator.getBattery().then(function (battery) {

        var charging = document.querySelector('li:nth-child(1)');
        var level = document.querySelector('li:nth-child(2)');
        var time = document.querySelector('li:nth-child(3)');
        var distime = document.querySelector('li:nth-child(4)');

        // init
        charging.innerHTML = "Battery charging? " + (battery.charging ? "Yes" : "No");
        level.innerHTML = "Battery level: " + battery.level * 100 + "%";
        time.innerHTML = "Battery charging time: " + battery.chargingTime + " seconds";
        distime.innerHTML = "Battery discharging time: " + battery.dischargingTime + " seconds";

        battery.addEventListener('chargingchange', function() {
          charging.innerHTML = "Battery charging? " + (battery.charging ? "Yes" : "No");
        });

        battery.addEventListener('levelchange', function() {
          level.innerHTML = "Battery level: " + battery.level * 100 + "%";
        });

        battery.addEventListener('chargingtimechange', function() {
          time.innerHTML = "Battery charging time: " + battery.chargingTime + " seconds";
        });

        battery.addEventListener('dischargingtimechange', function() {
          distime.innerHTML = "Battery discharging time: " + battery.dischargingTime + " seconds";
        });

      });

    })();
  </script>
</body>
</html>